{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"post-create\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"header\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-actions\"\n};\nconst _hoisted_8 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FileUpload = _resolveComponent(\"FileUpload\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"h1\", null, \"Write New Post\", -1)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goBack && $options.goBack(...args)),\n    class: \"btn-back\"\n  }, \"← Back to Posts\")]), _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.submitPost && $options.submitPost(...args), [\"prevent\"])),\n    class: \"post-form\"\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"title\"\n  }, \"Title\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"title\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.title = $event),\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"Enter post title...\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.form.title]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"content\"\n  }, \"Content\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"content\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.content = $event),\n    class: \"form-control content-textarea\",\n    placeholder: \"Write your post content here...\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.form.content]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"File Attachments\", -1)), _createVNode(_component_FileUpload, {\n    ref: \"fileUpload\",\n    onFilesSelected: $options.onFilesSelected\n  }, null, 8, [\"onFilesSelected\"])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.goBack && $options.goBack(...args)),\n    class: \"btn-cancel\"\n  }, \"Cancel\"), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn-submit\",\n    disabled: $data.submitting\n  }, _toDisplayString($data.submitting ? 'Publishing...' : 'Publish Post'), 9, _hoisted_8)])], 32)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","args","$options","goBack","onSubmit","_withModifiers","submitPost","_hoisted_4","for","id","$data","form","title","$event","type","placeholder","required","_hoisted_5","content","_hoisted_6","_createVNode","_component_FileUpload","ref","onFilesSelected","_hoisted_7","disabled","submitting","_hoisted_8"],"sources":["/home/ec2-user/test/frontend/src/views/PostCreate.vue"],"sourcesContent":["<template>\n  <div class=\"post-create\">\n    <div class=\"container\">\n      <div class=\"header\">\n        <h1>Write New Post</h1>\n        <button @click=\"goBack\" class=\"btn-back\">← Back to Posts</button>\n      </div>\n      \n      <form @submit.prevent=\"submitPost\" class=\"post-form\">\n        <div class=\"form-group\">\n          <label for=\"title\">Title</label>\n          <input\n            id=\"title\"\n            v-model=\"form.title\"\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Enter post title...\"\n            required\n          />\n        </div>\n        \n        <div class=\"form-group\">\n          <label for=\"content\">Content</label>\n          <textarea\n            id=\"content\"\n            v-model=\"form.content\"\n            class=\"form-control content-textarea\"\n            placeholder=\"Write your post content here...\"\n            required\n          ></textarea>\n        </div>\n        \n        <div class=\"form-group\">\n          <label>File Attachments</label>\n          <FileUpload \n            ref=\"fileUpload\"\n            @files-selected=\"onFilesSelected\"\n          />\n        </div>\n        \n        <div class=\"form-actions\">\n          <button type=\"button\" @click=\"goBack\" class=\"btn-cancel\">Cancel</button>\n          <button type=\"submit\" class=\"btn-submit\" :disabled=\"submitting\">\n            {{ submitting ? 'Publishing...' : 'Publish Post' }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { postService, fileService } from '../services/api'\nimport FileUpload from '../components/FileUpload.vue'\n\nexport default {\n  name: 'PostCreate',\n  components: {\n    FileUpload\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        content: ''\n      },\n      selectedFiles: [],\n      submitting: false\n    }\n  },\n  methods: {\n    async submitPost() {\n      if (!this.form.title.trim() || !this.form.content.trim()) {\n        alert('Please fill in both title and content.')\n        return\n      }\n      \n      try {\n        this.submitting = true\n        \n        const postResponse = await postService.createPost({\n          title: this.form.title.trim(),\n          content: this.form.content.trim()\n        })\n        \n        const postId = postResponse.data.id\n        \n        if (this.selectedFiles.length > 0) {\n          try {\n            await fileService.uploadFiles(postId, this.selectedFiles)\n          } catch (fileError) {\n            console.error('Error uploading files:', fileError)\n            alert('Post created but file upload failed. You can try uploading files later.')\n          }\n        }\n        \n        alert('Post created successfully!')\n        this.$router.push('/')\n      } catch (error) {\n        console.error('Error creating post:', error)\n        alert('Failed to create post. Please try again.')\n      } finally {\n        this.submitting = false\n      }\n    },\n    onFilesSelected(files) {\n      this.selectedFiles = files\n    },\n    \n    goBack() {\n      if (this.form.title || this.form.content || this.selectedFiles.length > 0) {\n        if (confirm('You have unsaved changes. Are you sure you want to leave?')) {\n          this.$router.push('/')\n        }\n      } else {\n        this.$router.push('/')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n}\n\n.header h1 {\n  color: #2c3e50;\n  margin: 0;\n}\n\n.btn-back {\n  background-color: #95a5a6;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: background-color 0.3s;\n}\n\n.btn-back:hover {\n  background-color: #7f8c8d;\n}\n\n.post-form {\n  background: white;\n  border-radius: 8px;\n  padding: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 25px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 8px;\n  color: #2c3e50;\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n.form-control {\n  width: 100%;\n  padding: 12px 15px;\n  border: 2px solid #ecf0f1;\n  border-radius: 5px;\n  font-size: 16px;\n  transition: border-color 0.3s;\n  box-sizing: border-box;\n}\n\n.form-control:focus {\n  outline: none;\n  border-color: #3498db;\n}\n\n.content-textarea {\n  min-height: 300px;\n  resize: vertical;\n  font-family: inherit;\n  line-height: 1.6;\n}\n\n.form-actions {\n  display: flex;\n  gap: 15px;\n  justify-content: flex-end;\n  margin-top: 30px;\n}\n\n.btn-cancel {\n  background-color: #95a5a6;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s;\n}\n\n.btn-cancel:hover {\n  background-color: #7f8c8d;\n}\n\n.btn-submit {\n  background-color: #27ae60;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s;\n}\n\n.btn-submit:hover:not(:disabled) {\n  background-color: #229954;\n}\n\n.btn-submit:disabled {\n  background-color: #bdc3c7;\n  cursor: not-allowed;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAQ;;EAMZA,KAAK,EAAC;AAAY;;EAYlBA,KAAK,EAAC;AAAY;;EAWlBA,KAAK,EAAC;AAAY;;EAQlBA,KAAK,EAAC;AAAc;;;;uBAvC/BC,mBAAA,CA+CM,OA/CNC,UA+CM,GA9CJC,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJD,mBAAA,CAGM,OAHNE,UAGM,G,0BAFJF,mBAAA,CAAuB,YAAnB,gBAAc,QAClBA,mBAAA,CAAiE;IAAxDG,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IAAER,KAAK,EAAC;KAAW,iBAAe,E,GAG1DG,mBAAA,CAsCO;IAtCAQ,QAAM,EAAAJ,MAAA,QAAAA,MAAA,MAAAK,cAAA,KAAAJ,IAAA,KAAUC,QAAA,CAAAI,UAAA,IAAAJ,QAAA,CAAAI,UAAA,IAAAL,IAAA,CAAU;IAAER,KAAK,EAAC;MACvCG,mBAAA,CAUM,OAVNW,UAUM,G,0BATJX,mBAAA,CAAgC;IAAzBY,GAAG,EAAC;EAAO,GAAC,OAAK,Q,gBACxBZ,mBAAA,CAOE;IANAa,EAAE,EAAC,OAAO;+DACDC,KAAA,CAAAC,IAAI,CAACC,KAAK,GAAAC,MAAA;IACnBC,IAAI,EAAC,MAAM;IACXrB,KAAK,EAAC,cAAc;IACpBsB,WAAW,EAAC,qBAAqB;IACjCC,QAAQ,EAAR;gCAJSN,KAAA,CAAAC,IAAI,CAACC,KAAK,E,KAQvBhB,mBAAA,CASM,OATNqB,UASM,G,0BARJrB,mBAAA,CAAoC;IAA7BY,GAAG,EAAC;EAAS,GAAC,SAAO,Q,gBAC5BZ,mBAAA,CAMY;IALVa,EAAE,EAAC,SAAS;+DACHC,KAAA,CAAAC,IAAI,CAACO,OAAO,GAAAL,MAAA;IACrBpB,KAAK,EAAC,+BAA+B;IACrCsB,WAAW,EAAC,iCAAiC;IAC7CC,QAAQ,EAAR;gCAHSN,KAAA,CAAAC,IAAI,CAACO,OAAO,E,KAOzBtB,mBAAA,CAMM,OANNuB,UAMM,G,0BALJvB,mBAAA,CAA+B,eAAxB,kBAAgB,QACvBwB,YAAA,CAGEC,qBAAA;IAFAC,GAAG,EAAC,YAAY;IACfC,eAAc,EAAErB,QAAA,CAAAqB;sCAIrB3B,mBAAA,CAKM,OALN4B,UAKM,GAJJ5B,mBAAA,CAAwE;IAAhEkB,IAAI,EAAC,QAAQ;IAAEf,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IAAER,KAAK,EAAC;KAAa,QAAM,GAC/DG,mBAAA,CAES;IAFDkB,IAAI,EAAC,QAAQ;IAACrB,KAAK,EAAC,YAAY;IAAEgC,QAAQ,EAAEf,KAAA,CAAAgB;sBAC/ChB,KAAA,CAAAgB,UAAU,yCAAAC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}