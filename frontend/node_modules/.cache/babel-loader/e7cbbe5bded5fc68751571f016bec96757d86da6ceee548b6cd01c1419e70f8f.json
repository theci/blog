{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"post-detail\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"error\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"post\"\n};\nconst _hoisted_6 = {\n  class: \"post-header\"\n};\nconst _hoisted_7 = {\n  class: \"post-content\"\n};\nconst _hoisted_8 = {\n  class: \"post-title\"\n};\nconst _hoisted_9 = {\n  class: \"post-meta\"\n};\nconst _hoisted_10 = {\n  class: \"post-date\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"post-date\"\n};\nconst _hoisted_12 = [\"innerHTML\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"file-attachments\"\n};\nconst _hoisted_14 = {\n  class: \"attachment-grid\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"image-attachment\"\n};\nconst _hoisted_16 = [\"src\", \"alt\", \"onClick\"];\nconst _hoisted_17 = {\n  class: \"file-name\"\n};\nconst _hoisted_18 = {\n  key: 1,\n  class: \"video-attachment\"\n};\nconst _hoisted_19 = [\"src\"];\nconst _hoisted_20 = {\n  class: \"file-name\"\n};\nconst _hoisted_21 = {\n  key: 2,\n  class: \"document-attachment\"\n};\nconst _hoisted_22 = {\n  class: \"document-info\"\n};\nconst _hoisted_23 = {\n  class: \"file-name\"\n};\nconst _hoisted_24 = {\n  class: \"file-size\"\n};\nconst _hoisted_25 = [\"href\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_CommentSection = _resolveComponent(\"CommentSection\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Loading...\")) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"Post not found\", -1)), _cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"The post you're looking for doesn't exist.\", -1)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goBack && $options.goBack(...args)),\n    class: \"btn-back\"\n  }, \"Go Back\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.goBack && $options.goBack(...args)),\n    class: \"btn-back\"\n  }, \"‚Üê Back to Posts\")]), _createElementVNode(\"article\", _hoisted_7, [_createElementVNode(\"h1\", _hoisted_8, _toDisplayString($data.post.title), 1), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, \"Created: \" + _toDisplayString($options.formatDate($data.post.createdDate)), 1), $data.post.modifiedDate !== $data.post.createdDate ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \" Modified: \" + _toDisplayString($options.formatDate($data.post.modifiedDate)), 1)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", {\n    class: \"post-body\",\n    innerHTML: $options.formatContent($data.post.content)\n  }, null, 8, _hoisted_12), $data.post.fileAttachments && $data.post.fileAttachments.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"Attachments\", -1)), _createElementVNode(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.post.fileAttachments, file => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: file.id,\n      class: \"attachment-item\"\n    }, [$options.isImage(file.contentType) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createElementVNode(\"img\", {\n      src: file.s3Url,\n      alt: file.originalFileName,\n      onClick: $event => $options.openFile(file.s3Url)\n    }, null, 8, _hoisted_16), _createElementVNode(\"p\", _hoisted_17, _toDisplayString(file.originalFileName), 1)])) : $options.isVideo(file.contentType) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"video\", {\n      src: file.s3Url,\n      controls: \"\"\n    }, \" Your browser does not support the video tag. \", 8, _hoisted_19), _createElementVNode(\"p\", _hoisted_20, _toDisplayString(file.originalFileName), 1)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n      class: \"document-icon\"\n    }, \"üìÑ\", -1)), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"p\", _hoisted_23, _toDisplayString(file.originalFileName), 1), _createElementVNode(\"p\", _hoisted_24, _toDisplayString($options.formatFileSize(file.fileSize)), 1), _createElementVNode(\"a\", {\n      href: file.s3Url,\n      target: \"_blank\",\n      class: \"download-btn\"\n    }, \"Download\", 8, _hoisted_25)])]))]);\n  }), 128))])])) : _createCommentVNode(\"\", true)]), _createVNode(_component_CommentSection, {\n    \"post-id\": $data.post.id,\n    onCommentsUpdated: $options.onCommentsUpdated\n  }, null, 8, [\"post-id\", \"onCommentsUpdated\"])]))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","loading","_hoisted_3","error","_hoisted_4","onClick","_cache","args","$options","goBack","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","post","title","_hoisted_9","_hoisted_10","formatDate","createdDate","modifiedDate","_hoisted_11","innerHTML","formatContent","content","fileAttachments","length","_hoisted_13","_hoisted_14","_Fragment","_renderList","file","key","id","isImage","contentType","_hoisted_15","src","s3Url","alt","originalFileName","$event","openFile","_hoisted_17","isVideo","_hoisted_18","controls","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","formatFileSize","fileSize","href","target","_hoisted_25","_createVNode","_component_CommentSection","onCommentsUpdated"],"sources":["/home/ec2-user/test/frontend/src/views/PostDetail.vue"],"sourcesContent":["<template>\n  <div class=\"post-detail\">\n    <div class=\"container\">\n      <div v-if=\"loading\" class=\"loading\">Loading...</div>\n      \n      <div v-else-if=\"error\" class=\"error\">\n        <h2>Post not found</h2>\n        <p>The post you're looking for doesn't exist.</p>\n        <button @click=\"goBack\" class=\"btn-back\">Go Back</button>\n      </div>\n      \n      <div v-else class=\"post\">\n        <div class=\"post-header\">\n          <button @click=\"goBack\" class=\"btn-back\">‚Üê Back to Posts</button>\n        </div>\n        \n        <article class=\"post-content\">\n          <h1 class=\"post-title\">{{ post.title }}</h1>\n          \n          <div class=\"post-meta\">\n            <span class=\"post-date\">Created: {{ formatDate(post.createdDate) }}</span>\n            <span v-if=\"post.modifiedDate !== post.createdDate\" class=\"post-date\">\n              Modified: {{ formatDate(post.modifiedDate) }}\n            </span>\n          </div>\n          \n          <div class=\"post-body\" v-html=\"formatContent(post.content)\"></div>\n          \n          <div v-if=\"post.fileAttachments && post.fileAttachments.length > 0\" class=\"file-attachments\">\n            <h3>Attachments</h3>\n            <div class=\"attachment-grid\">\n              <div \n                v-for=\"file in post.fileAttachments\" \n                :key=\"file.id\" \n                class=\"attachment-item\"\n              >\n                <div v-if=\"isImage(file.contentType)\" class=\"image-attachment\">\n                  <img :src=\"file.s3Url\" :alt=\"file.originalFileName\" @click=\"openFile(file.s3Url)\" />\n                  <p class=\"file-name\">{{ file.originalFileName }}</p>\n                </div>\n                \n                <div v-else-if=\"isVideo(file.contentType)\" class=\"video-attachment\">\n                  <video :src=\"file.s3Url\" controls>\n                    Your browser does not support the video tag.\n                  </video>\n                  <p class=\"file-name\">{{ file.originalFileName }}</p>\n                </div>\n                \n                <div v-else class=\"document-attachment\">\n                  <div class=\"document-icon\">üìÑ</div>\n                  <div class=\"document-info\">\n                    <p class=\"file-name\">{{ file.originalFileName }}</p>\n                    <p class=\"file-size\">{{ formatFileSize(file.fileSize) }}</p>\n                    <a :href=\"file.s3Url\" target=\"_blank\" class=\"download-btn\">Download</a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </article>\n        \n        <CommentSection \n          :post-id=\"post.id\" \n          @comments-updated=\"onCommentsUpdated\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { postService } from '../services/api'\nimport CommentSection from '../components/CommentSection.vue'\n\nexport default {\n  name: 'PostDetail',\n  components: {\n    CommentSection\n  },\n  data() {\n    return {\n      post: null,\n      loading: true,\n      error: false\n    }\n  },\n  async mounted() {\n    await this.fetchPost()\n  },\n  methods: {\n    async fetchPost() {\n      try {\n        this.loading = true\n        this.error = false\n        const postId = this.$route.params.id\n        const response = await postService.getPostById(postId)\n        this.post = response.data\n      } catch (error) {\n        console.error('Error fetching post:', error)\n        this.error = true\n      } finally {\n        this.loading = false\n      }\n    },\n    goBack() {\n      this.$router.push('/')\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString)\n      return date.toLocaleDateString('ko-KR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    },\n    formatContent(content) {\n      return content.replace(/\\n/g, '<br>')\n    },\n    \n    isImage(contentType) {\n      return contentType && contentType.startsWith('image/')\n    },\n    \n    isVideo(contentType) {\n      return contentType && contentType.startsWith('video/')\n    },\n    \n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes'\n      const k = 1024\n      const sizes = ['Bytes', 'KB', 'MB', 'GB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    },\n    \n    openFile(url) {\n      window.open(url, '_blank')\n    },\n    \n    onCommentsUpdated(count) {\n      console.log(`Comments updated: ${count} comments`)\n    }\n  },\n  watch: {\n    '$route'() {\n      this.fetchPost()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.loading {\n  text-align: center;\n  padding: 50px 0;\n  font-size: 18px;\n  color: #7f8c8d;\n}\n\n.error {\n  text-align: center;\n  padding: 50px 0;\n}\n\n.error h2 {\n  color: #e74c3c;\n  margin-bottom: 10px;\n}\n\n.error p {\n  color: #7f8c8d;\n  margin-bottom: 20px;\n}\n\n.btn-back {\n  background-color: #95a5a6;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: background-color 0.3s;\n  margin-bottom: 20px;\n}\n\n.btn-back:hover {\n  background-color: #7f8c8d;\n}\n\n.post-header {\n  margin-bottom: 20px;\n}\n\n.post-content {\n  background: white;\n  border-radius: 8px;\n  padding: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.post-title {\n  color: #2c3e50;\n  margin: 0 0 20px 0;\n  font-size: 2.5rem;\n  line-height: 1.2;\n  word-wrap: break-word;\n}\n\n.post-meta {\n  border-bottom: 2px solid #ecf0f1;\n  padding-bottom: 20px;\n  margin-bottom: 30px;\n}\n\n.post-date {\n  color: #95a5a6;\n  font-size: 0.9rem;\n  margin-right: 20px;\n}\n\n.post-body {\n  color: #2c3e50;\n  line-height: 1.8;\n  font-size: 1.1rem;\n  word-wrap: break-word;\n}\n\n.post-body ::v-deep(br) {\n  margin-bottom: 1em;\n}\n\n.file-attachments {\n  margin-top: 40px;\n  padding-top: 30px;\n  border-top: 2px solid #ecf0f1;\n}\n\n.file-attachments h3 {\n  color: #2c3e50;\n  margin: 0 0 20px 0;\n  font-size: 1.5rem;\n}\n\n.attachment-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.attachment-item {\n  border: 1px solid #ecf0f1;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: box-shadow 0.3s;\n}\n\n.attachment-item:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.image-attachment img {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  cursor: pointer;\n  transition: transform 0.3s;\n}\n\n.image-attachment img:hover {\n  transform: scale(1.05);\n}\n\n.video-attachment video {\n  width: 100%;\n  height: 200px;\n}\n\n.document-attachment {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  gap: 15px;\n}\n\n.document-icon {\n  font-size: 48px;\n}\n\n.document-info {\n  flex: 1;\n}\n\n.file-name {\n  margin: 10px 0 5px 0;\n  font-weight: 500;\n  color: #2c3e50;\n  word-break: break-word;\n}\n\n.file-size {\n  margin: 0;\n  font-size: 0.9rem;\n  color: #7f8c8d;\n}\n\n.download-btn {\n  display: inline-block;\n  margin-top: 10px;\n  padding: 8px 16px;\n  background-color: #3498db;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  transition: background-color 0.3s;\n}\n\n.download-btn:hover {\n  background-color: #2980b9;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}