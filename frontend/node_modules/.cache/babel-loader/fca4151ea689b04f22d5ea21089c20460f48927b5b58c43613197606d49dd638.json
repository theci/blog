{"ast":null,"code":"import { reactive } from 'vue';\nimport { authService } from '../services/api';\nexport const authStore = reactive({\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  init() {\n    const storedUser = localStorage.getItem('user');\n    const storedToken = localStorage.getItem('token');\n    if (storedUser && storedToken) {\n      this.user = JSON.parse(storedUser);\n      this.token = storedToken;\n      this.isAuthenticated = true;\n    }\n  },\n  async login(credentials) {\n    const response = await authService.login(credentials);\n    const {\n      token,\n      user\n    } = response.data;\n    this.token = token;\n    this.user = user;\n    this.isAuthenticated = true;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    return response.data;\n  },\n  async register(userData) {\n    const response = await authService.register(userData);\n    const {\n      token,\n      user\n    } = response.data;\n    this.token = token;\n    this.user = user;\n    this.isAuthenticated = true;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    return response.data;\n  },\n  async logout() {\n    try {\n      await authService.logout();\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      this.user = null;\n      this.token = null;\n      this.isAuthenticated = false;\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n    }\n  },\n  async getCurrentUser() {\n    try {\n      const response = await authService.getCurrentUser();\n      this.user = response.data;\n      return response.data;\n    } catch (error) {\n      this.logout();\n      throw error;\n    }\n  }\n});\nauthStore.init();","map":{"version":3,"names":["reactive","authService","authStore","user","token","localStorage","getItem","isAuthenticated","init","storedUser","storedToken","JSON","parse","login","credentials","response","data","setItem","stringify","register","userData","logout","error","console","removeItem","getCurrentUser"],"sources":["/home/ec2-user/test/frontend/src/store/auth.js"],"sourcesContent":["import { reactive } from 'vue'\nimport { authService } from '../services/api'\n\nexport const authStore = reactive({\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n\n  init() {\n    const storedUser = localStorage.getItem('user')\n    const storedToken = localStorage.getItem('token')\n    \n    if (storedUser && storedToken) {\n      this.user = JSON.parse(storedUser)\n      this.token = storedToken\n      this.isAuthenticated = true\n    }\n  },\n\n  async login(credentials) {\n    const response = await authService.login(credentials)\n    const { token, user } = response.data\n    \n    this.token = token\n    this.user = user\n    this.isAuthenticated = true\n    \n    localStorage.setItem('token', token)\n    localStorage.setItem('user', JSON.stringify(user))\n    \n    return response.data\n  },\n\n  async register(userData) {\n    const response = await authService.register(userData)\n    const { token, user } = response.data\n    \n    this.token = token\n    this.user = user\n    this.isAuthenticated = true\n    \n    localStorage.setItem('token', token)\n    localStorage.setItem('user', JSON.stringify(user))\n    \n    return response.data\n  },\n\n  async logout() {\n    try {\n      await authService.logout()\n    } catch (error) {\n      console.error('Logout error:', error)\n    } finally {\n      this.user = null\n      this.token = null\n      this.isAuthenticated = false\n      \n      localStorage.removeItem('token')\n      localStorage.removeItem('user')\n    }\n  },\n\n  async getCurrentUser() {\n    try {\n      const response = await authService.getCurrentUser()\n      this.user = response.data\n      return response.data\n    } catch (error) {\n      this.logout()\n      throw error\n    }\n  }\n})\n\nauthStore.init()"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,SAASC,WAAW,QAAQ,iBAAiB;AAE7C,OAAO,MAAMC,SAAS,GAAGF,QAAQ,CAAC;EAChCG,IAAI,EAAE,IAAI;EACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACpCC,eAAe,EAAE,KAAK;EAEtBC,IAAIA,CAAA,EAAG;IACL,MAAMC,UAAU,GAAGJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC/C,MAAMI,WAAW,GAAGL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAEjD,IAAIG,UAAU,IAAIC,WAAW,EAAE;MAC7B,IAAI,CAACP,IAAI,GAAGQ,IAAI,CAACC,KAAK,CAACH,UAAU,CAAC;MAClC,IAAI,CAACL,KAAK,GAAGM,WAAW;MACxB,IAAI,CAACH,eAAe,GAAG,IAAI;IAC7B;EACF,CAAC;EAED,MAAMM,KAAKA,CAACC,WAAW,EAAE;IACvB,MAAMC,QAAQ,GAAG,MAAMd,WAAW,CAACY,KAAK,CAACC,WAAW,CAAC;IACrD,MAAM;MAAEV,KAAK;MAAED;IAAK,CAAC,GAAGY,QAAQ,CAACC,IAAI;IAErC,IAAI,CAACZ,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACI,eAAe,GAAG,IAAI;IAE3BF,YAAY,CAACY,OAAO,CAAC,OAAO,EAAEb,KAAK,CAAC;IACpCC,YAAY,CAACY,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACO,SAAS,CAACf,IAAI,CAAC,CAAC;IAElD,OAAOY,QAAQ,CAACC,IAAI;EACtB,CAAC;EAED,MAAMG,QAAQA,CAACC,QAAQ,EAAE;IACvB,MAAML,QAAQ,GAAG,MAAMd,WAAW,CAACkB,QAAQ,CAACC,QAAQ,CAAC;IACrD,MAAM;MAAEhB,KAAK;MAAED;IAAK,CAAC,GAAGY,QAAQ,CAACC,IAAI;IAErC,IAAI,CAACZ,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACI,eAAe,GAAG,IAAI;IAE3BF,YAAY,CAACY,OAAO,CAAC,OAAO,EAAEb,KAAK,CAAC;IACpCC,YAAY,CAACY,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACO,SAAS,CAACf,IAAI,CAAC,CAAC;IAElD,OAAOY,QAAQ,CAACC,IAAI;EACtB,CAAC;EAED,MAAMK,MAAMA,CAAA,EAAG;IACb,IAAI;MACF,MAAMpB,WAAW,CAACoB,MAAM,CAAC,CAAC;IAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACvC,CAAC,SAAS;MACR,IAAI,CAACnB,IAAI,GAAG,IAAI;MAChB,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,IAAI,CAACG,eAAe,GAAG,KAAK;MAE5BF,YAAY,CAACmB,UAAU,CAAC,OAAO,CAAC;MAChCnB,YAAY,CAACmB,UAAU,CAAC,MAAM,CAAC;IACjC;EACF,CAAC;EAED,MAAMC,cAAcA,CAAA,EAAG;IACrB,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAMd,WAAW,CAACwB,cAAc,CAAC,CAAC;MACnD,IAAI,CAACtB,IAAI,GAAGY,QAAQ,CAACC,IAAI;MACzB,OAAOD,QAAQ,CAACC,IAAI;IACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACd,IAAI,CAACD,MAAM,CAAC,CAAC;MACb,MAAMC,KAAK;IACb;EACF;AACF,CAAC,CAAC;AAEFpB,SAAS,CAACM,IAAI,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}