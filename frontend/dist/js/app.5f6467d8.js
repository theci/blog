(function(){"use strict";var e={6520:function(e,t,o){var s=o(5130),n=o(6768),a=o(4232);const r={id:"app"},i={class:"navbar"},l={class:"nav-container"},c={class:"nav-menu"},d={key:0,class:"auth-buttons"},u={key:1,class:"user-menu"},m={class:"user-info"};function p(e,t,o,s,p,h){const g=(0,n.g2)("router-link"),f=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("nav",i,[(0,n.Lk)("div",l,[(0,n.bF)(g,{to:"/",class:"nav-logo"},{default:(0,n.k6)(()=>t[1]||(t[1]=[(0,n.eW)("Blog")])),_:1,__:[1]}),(0,n.Lk)("div",c,[(0,n.bF)(g,{to:"/",class:"nav-link"},{default:(0,n.k6)(()=>t[2]||(t[2]=[(0,n.eW)("Home")])),_:1,__:[2]}),s.authStore.isAuthenticated?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("span",m,(0,a.v_)(s.authStore.user?.displayName||s.authStore.user?.username),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.handleLogout&&s.handleLogout(...e)),class:"nav-link logout-btn"},"로그아웃")])):((0,n.uX)(),(0,n.CE)("div",d,[(0,n.bF)(g,{to:"/login",class:"nav-link login-btn"},{default:(0,n.k6)(()=>t[3]||(t[3]=[(0,n.eW)("로그인")])),_:1,__:[3]}),(0,n.bF)(g,{to:"/register",class:"nav-link register-btn"},{default:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.eW)("회원가입")])),_:1,__:[4]})]))])])]),(0,n.bF)(f)])}o(4114);var h=o(144),g=(o(8111),o(7588),o(4373));const f="/api",k=g.A.create({baseURL:f,headers:{"Content-Type":"application/json"}}),v={getAllPosts(){return k.get("/posts")},getPostById(e){return k.get(`/posts/${e}`)},createPost(e){return k.post("/posts",e)},updatePost(e,t){return k.put(`/posts/${e}`,t)},deletePost(e){return k.delete(`/posts/${e}`)}},b={uploadFiles(e,t){const o=new FormData;return t.forEach(e=>{o.append("files",e)}),g.A.post(`${f}/files/upload/${e}`,o,{headers:{"Content-Type":"multipart/form-data"}})}},y={getCommentsByPostId(e){return k.get(`/comments/post/${e}`)},createComment(e,t){return k.post(`/comments/post/${e}`,t)},updateComment(e,t){return k.put(`/comments/${e}`,t)},deleteComment(e){return k.delete(`/comments/${e}`)},getCommentCount(e){return k.get(`/comments/post/${e}/count`)}},L={register(e){return k.post("/auth/register",e)},login(e){return k.post("/auth/login",e)},logout(){return k.post("/auth/logout")},getCurrentUser(){return k.get("/auth/me")}};k.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),k.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));const C=(0,h.Kh)({user:null,token:localStorage.getItem("token"),isAuthenticated:!1,init(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&(this.user=JSON.parse(e),this.token=t,this.isAuthenticated=!0)},async login(e){const t=await L.login(e),{token:o,user:s}=t.data;return this.token=o,this.user=s,this.isAuthenticated=!0,localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(s)),t.data},async register(e){const t=await L.register(e),{token:o,user:s}=t.data;return this.token=o,this.user=s,this.isAuthenticated=!0,localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(s)),t.data},async logout(){try{await L.logout()}catch(e){console.error("Logout error:",e)}finally{this.user=null,this.token=null,this.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")}},async getCurrentUser(){try{const e=await L.getCurrentUser();return this.user=e.data,e.data}catch(e){throw this.logout(),e}}});C.init();var w=o(1387),F={name:"App",setup(){const e=(0,w.rd)(),t=async()=>{await C.logout(),e.push("/")};return{authStore:C,handleLogout:t}}},D=o(1241);const E=(0,D.A)(F,[["render",p]]);var P=E;const _={class:"post-list"},S={class:"container"},X={class:"header"},I={key:0,class:"loading"},$={key:1,class:"no-posts"},A={key:2,class:"posts-grid"},U=["onClick"],B={class:"post-title"},x={class:"post-content"},M={class:"post-meta"},N={class:"post-date"};function O(e,t,o,s,r,i){return(0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",S,[(0,n.Lk)("div",X,[t[1]||(t[1]=(0,n.Lk)("h1",null,"Blog Posts",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.goToCreate&&i.goToCreate(...e)),class:"btn-create"},"Write New Post")]),r.loading?((0,n.uX)(),(0,n.CE)("div",I,"Loading...")):0===r.posts.length?((0,n.uX)(),(0,n.CE)("div",$," No posts available. Create your first post! ")):((0,n.uX)(),(0,n.CE)("div",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.posts,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"post-card",onClick:t=>i.goToDetail(e.id)},[(0,n.Lk)("h3",B,(0,a.v_)(e.title),1),(0,n.Lk)("p",x,(0,a.v_)(i.truncateContent(e.content)),1),(0,n.Lk)("div",M,[(0,n.Lk)("span",N,(0,a.v_)(i.formatDate(e.createdDate)),1)])],8,U))),128))]))])])}var T={name:"PostList",data(){return{posts:[],loading:!0}},async mounted(){await this.fetchPosts()},methods:{async fetchPosts(){try{this.loading=!0;const e=await v.getAllPosts();this.posts=e.data}catch(e){console.error("Error fetching posts:",e)}finally{this.loading=!1}},goToDetail(e){this.$router.push(`/post/${e}`)},goToCreate(){this.$router.push("/create")},truncateContent(e){return e.length>150?e.substring(0,150)+"...":e},formatDate(e){const t=new Date(e);return t.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}}};const K=(0,D.A)(T,[["render",O],["__scopeId","data-v-2cd1358b"]]);var q=K;const J={class:"post-detail"},R={class:"container"},V={key:0,class:"loading"},W={key:1,class:"error"},j={key:2,class:"post"},Q={class:"post-header"},z={class:"post-content"},Y={class:"post-title"},G={class:"post-meta"},H={class:"post-date"},Z={key:0,class:"post-date"},ee=["innerHTML"],te={key:0,class:"file-attachments"},oe={class:"attachment-grid"},se={key:0,class:"image-attachment"},ne=["src","alt","onClick"],ae={class:"file-name"},re={key:1,class:"video-attachment"},ie=["src"],le={class:"file-name"},ce={key:2,class:"document-attachment"},de={class:"document-info"},ue={class:"file-name"},me={class:"file-size"},pe=["href"];function he(e,t,o,s,r,i){const l=(0,n.g2)("CommentSection");return(0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("div",R,[r.loading?((0,n.uX)(),(0,n.CE)("div",V,"Loading...")):r.error?((0,n.uX)(),(0,n.CE)("div",W,[t[2]||(t[2]=(0,n.Lk)("h2",null,"Post not found",-1)),t[3]||(t[3]=(0,n.Lk)("p",null,"The post you're looking for doesn't exist.",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.goBack&&i.goBack(...e)),class:"btn-back"},"Go Back")])):((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",Q,[(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.goBack&&i.goBack(...e)),class:"btn-back"},"← Back to Posts")]),(0,n.Lk)("article",z,[(0,n.Lk)("h1",Y,(0,a.v_)(r.post.title),1),(0,n.Lk)("div",G,[(0,n.Lk)("span",H,"Created: "+(0,a.v_)(i.formatDate(r.post.createdDate)),1),r.post.modifiedDate!==r.post.createdDate?((0,n.uX)(),(0,n.CE)("span",Z," Modified: "+(0,a.v_)(i.formatDate(r.post.modifiedDate)),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",{class:"post-body",innerHTML:i.formatContent(r.post.content)},null,8,ee),r.post.fileAttachments&&r.post.fileAttachments.length>0?((0,n.uX)(),(0,n.CE)("div",te,[t[5]||(t[5]=(0,n.Lk)("h3",null,"Attachments",-1)),(0,n.Lk)("div",oe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.post.fileAttachments,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"attachment-item"},[i.isImage(e.contentType)?((0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("img",{src:e.s3Url,alt:e.originalFileName,onClick:t=>i.openFile(e.s3Url)},null,8,ne),(0,n.Lk)("p",ae,(0,a.v_)(e.originalFileName),1)])):i.isVideo(e.contentType)?((0,n.uX)(),(0,n.CE)("div",re,[(0,n.Lk)("video",{src:e.s3Url,controls:""}," Your browser does not support the video tag. ",8,ie),(0,n.Lk)("p",le,(0,a.v_)(e.originalFileName),1)])):((0,n.uX)(),(0,n.CE)("div",ce,[t[4]||(t[4]=(0,n.Lk)("div",{class:"document-icon"},"📄",-1)),(0,n.Lk)("div",de,[(0,n.Lk)("p",ue,(0,a.v_)(e.originalFileName),1),(0,n.Lk)("p",me,(0,a.v_)(i.formatFileSize(e.fileSize)),1),(0,n.Lk)("a",{href:e.s3Url,target:"_blank",class:"download-btn"},"Download",8,pe)])]))]))),128))])])):(0,n.Q3)("",!0)]),(0,n.bF)(l,{"post-id":r.post.id,onCommentsUpdated:i.onCommentsUpdated},null,8,["post-id","onCommentsUpdated"])]))])])}const ge={class:"comment-section"},fe={class:"comment-header"},ke={class:"comment-form"},ve={class:"form-row"},be={class:"form-row"},ye={class:"form-actions"},Le=["disabled"],Ce={class:"comments-list"},we={key:0,class:"loading"},Fe={key:1,class:"no-comments"},De={key:2},Ee={class:"comment-header-info"},Pe={class:"comment-author"},_e={class:"comment-date"},Se={key:0,class:"comment-edited"},Xe={class:"comment-content"},Ie={class:"comment-actions"},$e=["onClick"],Ae=["onClick"],Ue={key:0,class:"edit-form"},Be={class:"form-row"},xe={class:"form-row"},Me={class:"form-actions"},Ne=["disabled"];function Oe(e,t,o,r,i,l){return(0,n.uX)(),(0,n.CE)("div",ge,[(0,n.Lk)("div",fe,[(0,n.Lk)("h3",null,"Comments ("+(0,a.v_)(i.comments.length)+")",1)]),(0,n.Lk)("div",ke,[(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>l.submitComment&&l.submitComment(...e),["prevent"]))},[(0,n.Lk)("div",ve,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.newComment.author=e),type:"text",placeholder:"Your name",class:"author-input",required:""},null,512),[[s.Jo,i.newComment.author]])]),(0,n.Lk)("div",be,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.newComment.content=e),placeholder:"Write your comment...",class:"comment-textarea",rows:"3",required:""},null,512),[[s.Jo,i.newComment.content]])]),(0,n.Lk)("div",ye,[(0,n.Lk)("button",{type:"submit",class:"submit-btn",disabled:i.submitting},(0,a.v_)(i.submitting?"Posting...":"Post Comment"),9,Le)])],32)]),(0,n.Lk)("div",Ce,[i.loading?((0,n.uX)(),(0,n.CE)("div",we,"Loading comments...")):0===i.comments.length?((0,n.uX)(),(0,n.CE)("div",Fe," No comments yet. Be the first to comment! ")):((0,n.uX)(),(0,n.CE)("div",De,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.comments,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"comment-item"},[(0,n.Lk)("div",Ee,[(0,n.Lk)("span",Pe,(0,a.v_)(e.author),1),(0,n.Lk)("span",_e,(0,a.v_)(l.formatDate(e.createdDate)),1),e.modifiedDate!==e.createdDate?((0,n.uX)(),(0,n.CE)("span",Se," (edited) ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Xe,(0,a.v_)(e.content),1),(0,n.Lk)("div",Ie,[i.editingComment&&i.editingComment.id===e.id?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t=>l.startEdit(e),class:"edit-btn"}," Edit ",8,$e)),i.editingComment&&i.editingComment.id===e.id?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t=>l.deleteComment(e.id),class:"delete-btn"}," Delete ",8,Ae))]),i.editingComment&&i.editingComment.id===e.id?((0,n.uX)(),(0,n.CE)("div",Ue,[(0,n.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)((...e)=>l.updateComment&&l.updateComment(...e),["prevent"]))},[(0,n.Lk)("div",Be,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.editingComment.author=e),type:"text",placeholder:"Your name",class:"author-input",required:""},null,512),[[s.Jo,i.editingComment.author]])]),(0,n.Lk)("div",xe,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.editingComment.content=e),placeholder:"Edit your comment...",class:"comment-textarea",rows:"3",required:""},null,512),[[s.Jo,i.editingComment.content]])]),(0,n.Lk)("div",Me,[(0,n.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>l.cancelEdit&&l.cancelEdit(...e)),class:"cancel-btn"},"Cancel"),(0,n.Lk)("button",{type:"submit",class:"submit-btn",disabled:i.updating},(0,a.v_)(i.updating?"Updating...":"Update"),9,Ne)])],32)])):(0,n.Q3)("",!0)]))),128))]))])])}var Te={name:"CommentSection",props:{postId:{type:[String,Number],required:!0}},emits:["comments-updated"],data(){return{comments:[],loading:!1,submitting:!1,updating:!1,newComment:{author:"",content:""},editingComment:null}},async mounted(){await this.fetchComments()},methods:{async fetchComments(){try{this.loading=!0;const e=await this.$commentService.getCommentsByPostId(this.postId);this.comments=e.data,this.$emit("comments-updated",this.comments.length)}catch(e){console.error("Error fetching comments:",e)}finally{this.loading=!1}},async submitComment(){if(this.newComment.author.trim()&&this.newComment.content.trim())try{this.submitting=!0,await this.$commentService.createComment(this.postId,{author:this.newComment.author.trim(),content:this.newComment.content.trim()}),this.newComment.author="",this.newComment.content="",await this.fetchComments()}catch(e){console.error("Error creating comment:",e),alert("Failed to post comment. Please try again.")}finally{this.submitting=!1}else alert("Please fill in both name and comment.")},startEdit(e){this.editingComment={id:e.id,author:e.author,content:e.content}},cancelEdit(){this.editingComment=null},async updateComment(){if(this.editingComment.author.trim()&&this.editingComment.content.trim())try{this.updating=!0,await this.$commentService.updateComment(this.editingComment.id,{author:this.editingComment.author.trim(),content:this.editingComment.content.trim()}),this.editingComment=null,await this.fetchComments()}catch(e){console.error("Error updating comment:",e),alert("Failed to update comment. Please try again.")}finally{this.updating=!1}else alert("Please fill in both name and comment.")},async deleteComment(e){if(confirm("Are you sure you want to delete this comment?"))try{await this.$commentService.deleteComment(e),await this.fetchComments()}catch(t){console.error("Error deleting comment:",t),alert("Failed to delete comment. Please try again.")}},formatDate(e){const t=new Date(e);return t.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},watch:{postId(){this.fetchComments()}}};const Ke=(0,D.A)(Te,[["render",Oe],["__scopeId","data-v-682c0aa2"]]);var qe=Ke,Je={name:"PostDetail",components:{CommentSection:qe},data(){return{post:null,loading:!0,error:!1}},async mounted(){await this.fetchPost()},methods:{async fetchPost(){try{this.loading=!0,this.error=!1;const e=this.$route.params.id,t=await v.getPostById(e);this.post=t.data}catch(e){console.error("Error fetching post:",e),this.error=!0}finally{this.loading=!1}},goBack(){this.$router.push("/")},formatDate(e){const t=new Date(e);return t.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatContent(e){return e.replace(/\n/g,"<br>")},isImage(e){return e&&e.startsWith("image/")},isVideo(e){return e&&e.startsWith("video/")},formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+o[s]},openFile(e){window.open(e,"_blank")},onCommentsUpdated(e){console.log(`Comments updated: ${e} comments`)}},watch:{$route(){this.fetchPost()}}};const Re=(0,D.A)(Je,[["render",he],["__scopeId","data-v-0b1b466e"]]);var Ve=Re;const We={class:"post-create"},je={class:"container"},Qe={class:"header"},ze={class:"form-group"},Ye={class:"form-group"},Ge={class:"form-group"},He={class:"form-actions"},Ze=["disabled"];function et(e,t,o,r,i,l){const c=(0,n.g2)("FileUpload");return(0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("div",je,[(0,n.Lk)("div",Qe,[t[5]||(t[5]=(0,n.Lk)("h1",null,"Write New Post",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e)),class:"btn-back"},"← Back to Posts")]),(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)((...e)=>l.submitPost&&l.submitPost(...e),["prevent"])),class:"post-form"},[(0,n.Lk)("div",ze,[t[6]||(t[6]=(0,n.Lk)("label",{for:"title"},"Title",-1)),(0,n.bo)((0,n.Lk)("input",{id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.title=e),type:"text",class:"form-control",placeholder:"Enter post title...",required:""},null,512),[[s.Jo,i.form.title]])]),(0,n.Lk)("div",Ye,[t[7]||(t[7]=(0,n.Lk)("label",{for:"content"},"Content",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.content=e),class:"form-control content-textarea",placeholder:"Write your post content here...",required:""},null,512),[[s.Jo,i.form.content]])]),(0,n.Lk)("div",Ge,[t[8]||(t[8]=(0,n.Lk)("label",null,"File Attachments",-1)),(0,n.bF)(c,{ref:"fileUpload",onFilesSelected:l.onFilesSelected},null,8,["onFilesSelected"])]),(0,n.Lk)("div",He,[(0,n.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>l.goBack&&l.goBack(...e)),class:"btn-cancel"},"Cancel"),(0,n.Lk)("button",{type:"submit",class:"btn-submit",disabled:i.submitting},(0,a.v_)(i.submitting?"Publishing...":"Publish Post"),9,Ze)])],32)])])}const tt={class:"file-upload"},ot={class:"upload-content"},st={key:0,class:"file-list"},nt={class:"file-info"},at={class:"file-name"},rt={class:"file-size"},it=["onClick"],lt={key:1,class:"upload-progress"},ct={class:"progress-bar"};function dt(e,t,o,s,r,i){return(0,n.uX)(),(0,n.CE)("div",tt,[(0,n.Lk)("div",{class:"upload-area",onDrop:t[2]||(t[2]=(...e)=>i.handleDrop&&i.handleDrop(...e)),onDragover:t[3]||(t[3]=(...e)=>i.handleDragOver&&i.handleDragOver(...e)),onDragenter:t[4]||(t[4]=(...e)=>i.handleDragEnter&&i.handleDragEnter(...e)),onDragleave:t[5]||(t[5]=(...e)=>i.handleDragLeave&&i.handleDragLeave(...e))},[(0,n.Lk)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[0]||(t[0]=(...e)=>i.handleFileSelect&&i.handleFileSelect(...e)),accept:"image/*,video/*,.pdf,.doc,.docx,.txt",style:{display:"none"}},null,544),(0,n.Lk)("div",ot,[t[7]||(t[7]=(0,n.Lk)("div",{class:"upload-icon"},"📁",-1)),(0,n.Lk)("p",null,[t[6]||(t[6]=(0,n.eW)("Drop files here or ")),(0,n.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>i.selectFiles&&i.selectFiles(...e)),class:"select-btn"},"choose files")]),t[8]||(t[8]=(0,n.Lk)("p",{class:"upload-hint"},"Supports: Images, Videos, PDF, Documents",-1))])],32),r.selectedFiles.length>0?((0,n.uX)(),(0,n.CE)("div",st,[t[9]||(t[9]=(0,n.Lk)("h4",null,"Selected Files:",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.selectedFiles,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"file-item",key:t},[(0,n.Lk)("div",nt,[(0,n.Lk)("span",at,(0,a.v_)(e.name),1),(0,n.Lk)("span",rt,(0,a.v_)(i.formatFileSize(e.size)),1)]),(0,n.Lk)("button",{type:"button",onClick:e=>i.removeFile(t),class:"remove-btn"},"×",8,it)]))),128))])):(0,n.Q3)("",!0),r.uploadProgress.length>0?((0,n.uX)(),(0,n.CE)("div",lt,[t[10]||(t[10]=(0,n.Lk)("h4",null,"Upload Progress:",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.uploadProgress,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"progress-item"},[(0,n.Lk)("span",null,(0,a.v_)(e.fileName),1),(0,n.Lk)("div",ct,[(0,n.Lk)("div",{class:"progress-fill",style:(0,a.Tr)({width:e.percent+"%"})},null,4)]),(0,n.Lk)("span",null,(0,a.v_)(e.percent)+"%",1)]))),128))])):(0,n.Q3)("",!0)])}var ut={name:"FileUpload",emits:["files-selected","upload-complete"],data(){return{selectedFiles:[],uploadProgress:[],isDragging:!1}},methods:{selectFiles(){this.$refs.fileInput.click()},handleFileSelect(e){const t=Array.from(e.target.files);this.addFiles(t)},handleDrop(e){e.preventDefault(),this.isDragging=!1;const t=Array.from(e.dataTransfer.files);this.addFiles(t)},handleDragOver(e){e.preventDefault()},handleDragEnter(e){e.preventDefault(),this.isDragging=!0},handleDragLeave(e){e.preventDefault(),this.isDragging=!1},addFiles(e){this.selectedFiles=[...this.selectedFiles,...e],this.$emit("files-selected",this.selectedFiles)},removeFile(e){this.selectedFiles.splice(e,1),this.$emit("files-selected",this.selectedFiles)},formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+o[s]},clearFiles(){this.selectedFiles=[],this.uploadProgress=[],this.$emit("files-selected",[])}}};const mt=(0,D.A)(ut,[["render",dt],["__scopeId","data-v-3015fc46"]]);var pt=mt,ht={name:"PostCreate",components:{FileUpload:pt},data(){return{form:{title:"",content:""},selectedFiles:[],submitting:!1}},methods:{async submitPost(){if(this.form.title.trim()&&this.form.content.trim())try{this.submitting=!0;const t=await v.createPost({title:this.form.title.trim(),content:this.form.content.trim()}),o=t.data.id;if(this.selectedFiles.length>0)try{await b.uploadFiles(o,this.selectedFiles)}catch(e){console.error("Error uploading files:",e),alert("Post created but file upload failed. You can try uploading files later.")}alert("Post created successfully!"),this.$router.push("/")}catch(t){console.error("Error creating post:",t),alert("Failed to create post. Please try again.")}finally{this.submitting=!1}else alert("Please fill in both title and content.")},onFilesSelected(e){this.selectedFiles=e},goBack(){this.form.title||this.form.content||this.selectedFiles.length>0?confirm("You have unsaved changes. Are you sure you want to leave?")&&this.$router.push("/"):this.$router.push("/")}}};const gt=(0,D.A)(ht,[["render",et],["__scopeId","data-v-69d07fa7"]]);var ft=gt;const kt={class:"login-container"},vt={class:"login-form"},bt={class:"form-group"},yt={class:"form-group"},Lt=["disabled"],Ct={class:"form-footer"},wt={key:0,class:"error-message"};function Ft(e,t,o,r,i,l){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",kt,[(0,n.Lk)("div",vt,[t[7]||(t[7]=(0,n.Lk)("h2",null,"로그인",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>r.handleLogin&&r.handleLogin(...e),["prevent"]))},[(0,n.Lk)("div",bt,[t[3]||(t[3]=(0,n.Lk)("label",{for:"username"},"사용자명",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.username=e),required:"",placeholder:"사용자명을 입력하세요"},null,512),[[s.Jo,r.credentials.username]])]),(0,n.Lk)("div",yt,[t[4]||(t[4]=(0,n.Lk)("label",{for:"password"},"비밀번호",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.password=e),required:"",placeholder:"비밀번호를 입력하세요"},null,512),[[s.Jo,r.credentials.password]])]),(0,n.Lk)("button",{type:"submit",disabled:r.loading,class:"login-btn"},(0,a.v_)(r.loading?"로그인 중...":"로그인"),9,Lt)],32),(0,n.Lk)("div",Ct,[(0,n.Lk)("p",null,[t[6]||(t[6]=(0,n.eW)("계정이 없으신가요? ")),(0,n.bF)(c,{to:"/register"},{default:(0,n.k6)(()=>t[5]||(t[5]=[(0,n.eW)("회원가입")])),_:1,__:[5]})])]),r.error?((0,n.uX)(),(0,n.CE)("div",wt,(0,a.v_)(r.error),1)):(0,n.Q3)("",!0)])])}var Dt={name:"LoginPage",setup(){const e=(0,w.rd)(),t=(0,h.KR)({username:"",password:""}),o=(0,h.KR)(!1),s=(0,h.KR)(""),n=async()=>{o.value=!0,s.value="";try{await C.login(t.value),e.push("/")}catch(n){s.value="로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요."}finally{o.value=!1}};return{credentials:t,loading:o,error:s,handleLogin:n}}};const Et=(0,D.A)(Dt,[["render",Ft],["__scopeId","data-v-78035186"]]);var Pt=Et;const _t={class:"register-container"},St={class:"register-form"},Xt={class:"form-group"},It={class:"form-group"},$t={class:"form-group"},At={class:"form-group"},Ut={class:"form-group"},Bt=["disabled"],xt={class:"form-footer"},Mt={key:0,class:"error-message"},Nt={key:1,class:"error-message"};function Ot(e,t,o,r,i,l){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",_t,[(0,n.Lk)("div",St,[t[13]||(t[13]=(0,n.Lk)("h2",null,"회원가입",-1)),(0,n.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)((...e)=>r.handleRegister&&r.handleRegister(...e),["prevent"]))},[(0,n.Lk)("div",Xt,[t[6]||(t[6]=(0,n.Lk)("label",{for:"username"},"사용자명",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.userData.username=e),required:"",placeholder:"사용자명을 입력하세요"},null,512),[[s.Jo,r.userData.username]])]),(0,n.Lk)("div",It,[t[7]||(t[7]=(0,n.Lk)("label",{for:"email"},"이메일",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.userData.email=e),required:"",placeholder:"이메일을 입력하세요"},null,512),[[s.Jo,r.userData.email]])]),(0,n.Lk)("div",$t,[t[8]||(t[8]=(0,n.Lk)("label",{for:"displayName"},"표시 이름",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"displayName","onUpdate:modelValue":t[2]||(t[2]=e=>r.userData.displayName=e),placeholder:"표시 이름을 입력하세요 (선택사항)"},null,512),[[s.Jo,r.userData.displayName]])]),(0,n.Lk)("div",At,[t[9]||(t[9]=(0,n.Lk)("label",{for:"password"},"비밀번호",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>r.userData.password=e),required:"",placeholder:"비밀번호를 입력하세요"},null,512),[[s.Jo,r.userData.password]])]),(0,n.Lk)("div",Ut,[t[10]||(t[10]=(0,n.Lk)("label",{for:"confirmPassword"},"비밀번호 확인",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[4]||(t[4]=e=>r.confirmPassword=e),required:"",placeholder:"비밀번호를 다시 입력하세요"},null,512),[[s.Jo,r.confirmPassword]])]),(0,n.Lk)("button",{type:"submit",disabled:r.loading||!r.isPasswordMatch,class:"register-btn"},(0,a.v_)(r.loading?"회원가입 중...":"회원가입"),9,Bt)],32),(0,n.Lk)("div",xt,[(0,n.Lk)("p",null,[t[12]||(t[12]=(0,n.eW)("이미 계정이 있으신가요? ")),(0,n.bF)(c,{to:"/login"},{default:(0,n.k6)(()=>t[11]||(t[11]=[(0,n.eW)("로그인")])),_:1,__:[11]})])]),r.error?((0,n.uX)(),(0,n.CE)("div",Mt,(0,a.v_)(r.error),1)):(0,n.Q3)("",!0),!r.isPasswordMatch&&r.confirmPassword?((0,n.uX)(),(0,n.CE)("div",Nt," 비밀번호가 일치하지 않습니다. ")):(0,n.Q3)("",!0)])])}var Tt={name:"RegisterPage",setup(){const e=(0,w.rd)(),t=(0,h.KR)({username:"",email:"",displayName:"",password:""}),o=(0,h.KR)(""),s=(0,h.KR)(!1),a=(0,h.KR)(""),r=(0,n.EW)(()=>!o.value||t.value.password===o.value),i=async()=>{if(r.value){s.value=!0,a.value="";try{await C.register(t.value),e.push("/")}catch(o){400===o.response?.status?a.value="이미 존재하는 사용자명 또는 이메일입니다.":a.value="회원가입에 실패했습니다. 다시 시도해주세요."}finally{s.value=!1}}else a.value="비밀번호가 일치하지 않습니다."};return{userData:t,confirmPassword:o,loading:s,error:a,isPasswordMatch:r,handleRegister:i}}};const Kt=(0,D.A)(Tt,[["render",Ot],["__scopeId","data-v-39e1449e"]]);var qt=Kt;const Jt=[{path:"/",name:"PostList",component:q},{path:"/post/:id",name:"PostDetail",component:Ve},{path:"/create",name:"PostCreate",component:ft,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Pt,meta:{guest:!0}},{path:"/register",name:"Register",component:qt,meta:{guest:!0}}],Rt=(0,w.aE)({history:(0,w.LA)("/"),routes:Jt});Rt.beforeEach((e,t,o)=>{const s=C.isAuthenticated;e.meta.requiresAuth&&!s?o("/login"):e.meta.guest&&s?o("/"):o()});var Vt=Rt;const Wt=(0,s.Ef)(P);Wt.use(Vt),Wt.config.globalProperties.$commentService=y,Wt.mount("#app")}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,a){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],a=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every(function(e){return o.O[e](s[l])})?s.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,a,r=s[0],i=s[1],l=s[2],c=0;if(r.some(function(t){return 0!==e[t]})){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var d=l(o)}for(t&&t(s);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},s=self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],function(){return o(6520)});s=o.O(s)})();
//# sourceMappingURL=app.5f6467d8.js.map